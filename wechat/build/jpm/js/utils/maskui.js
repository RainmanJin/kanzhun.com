!function(a){"function"==typeof define&&define.amd?define(a):a()}(function(){String.prototype.format=function(){var a=arguments;return this.replace(/\{(\d)\}/g,function(){return a[arguments[1]]})};var a=(window.document,{zIndex:100,css:{position:"fixed"},overlayCss:{backgroundColor:"#000",opacity:.4,position:"fixed",left:0,top:0,width:"100%",height:"100%"},pos:"fixed",overlayClick:!1,needOverlay:!0,onOpen:null,onClose:null,resetForm:!1,destroy:!1}),b=function(){};b.queue=[],b.queueClear=function(){$.each(b.queue,function(a,b){b.destroy?b.ui.remove():b.ui.hide(),b=null}),b.queue=[]},b.prototype={open:function(b){var c,d=b.elem;if("string"!=typeof d||b.content)if("object"==typeof d&&d.nodeType&&1==d.nodeType)c=$(d);else if("object"==typeof d&&void 0!==d.selector&&d.length>0)c=d;else{if(void 0===b.content)return!1;var e=b.id;c=$(e&&$("#"+e).length?"#"+e:$.maskUI.config.wrap.format(e||"",b.content)),b.destroy="undefined"==typeof b.destroy?!0:b.destroy}else c=$("#"+d);b.ui=c,$.extend(!0,this,a,b),$.isFunction(this.onOpen)&&this.onOpen.call(c,this),this.needOverlay&&this.createOverlay(),this.createContent()},alert:function(a,b){"string"==typeof a?this.open({content:$.maskUI.config.alert.format(a,b||"确定")}):$.isPlainObject(a)&&(a.content=$.maskUI.config.alert.format(a.msg,b||"确定"),this.open(a))},confirm:function(a){var b=this;this.createCallback=function(){var c=this;c.on("click","a.confirm_ok",function(d){d.preventDefault(),a.callback.call(c),$.maskUI.close.call(c,b)})},a.content=$.maskUI.config.confirm.format(a.msg,a.className),a.overlayClick=!1,this.open(a)},createOverlay:function(){var a={"z-index":this.zIndex};b.overlay?b.overlay.css($.extend({},this.overlayCss,a)).show():b.overlay=$("<div/>").attr("id","maskOverlay").css($.extend({},this.overlayCss,a)).prependTo($("body")),b.queueClear()},createContent:function(){var a=this.ui,c=this;b.queueClear(),$.contains(document.body,a[0])||a.appendTo($("body"));var d,e=$(window).height(),f=this.ui.outerHeight(),g=f>e;if(g&&(this.pos="absolute"),"fixed"===this.pos)d={"margin-left":-1*Math.floor(a.outerWidth()/2)+"px","margin-top":-1*Math.floor(a.outerHeight()/2)+"px",top:"50%",left:"50%",position:"fixed","z-index":parseInt(this.zIndex,10)+1,display:"block"};else if("absolute"===this.pos){var h;h=g?parseInt($(window).scrollTop())+10:parseInt($(window).scrollTop())+(e-f)/2,d={"margin-left":-1*Math.floor(a.outerWidth()/2)+"px",top:h,left:"50%",position:"absolute","z-index":parseInt(this.zIndex,10)+1,display:"block"}}a.css($.extend({},this.css,d)),b.queue.push(c),this.overlayClick&&$("#maskOverlay").on("click",function(){$.maskUI.close.call(a,c)}),a.find(".maskui_close, .maskuiclose, #dialogClose, a.dialog_close").on("click",function(b){b.preventDefault(),$.maskUI.close.call(a,c)}),this.createCallback&&this.createCallback.call(a)}},$.maskUI={config:{wrap:'<section class="maskui_dialog" id="{0}"><div class="dialog_con"><a href="javascript:;" class="dialog_close"></a>{1}</div></section>',alert:'<div class="dialog_ac"><div>{0}</div><p><a href="javascript:;" class="maskui_close dialog_btn">{1}</a></p></div>',confirm:'<div class="dialog_ac"><div>{0}</div><p><a href="javascript:;" class="confirm_ok dialog_btn">确定</a><a href="javascript:;" class="maskui_close dialog_btn">取消</a></p></div>'},open:function(a){var c=new b;return c.open(a),c},alert:function(a,c){var d=new b;return d.alert(a,c),d},confirm:function(a){var c=new b;return c.confirm(a),c},close:function(a){if($("#maskOverlay").fadeOut(200).off("click"),this.selector&&this.find(".maskui_close, .maskuiclose, #dialogClose, a.dialog_close").off("click"),b.queueClear(),a){if(a.onClose&&a.onClose.call(this,a),a.resetForm){var c=this.find("form").eq(0);c.length&&c[0].reset()}a.destroy&&this.remove()}}}});