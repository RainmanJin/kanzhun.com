$(function(){function a(a,b,c){$("body").append('<div class="mask" id="wxMask"><div class="transmitDialog" id="transmitDialog"><p>'+b+'</p><i class="arrows"></i></div></div>');var d=$("#wxMask"),e=$("#transmitDialog");return d.show(),e.show(),a&&a.on("click",function(a){a.preventDefault(),d.show(),e.show()}),d.on("click",function(){d.hide(),e.hide()}),c&&c(),{open:function(a){$("#transmitDialog>p").html(a),d.show(),e.show()},close:function(){d.hide(),e.hide()}}}window.shareCallback=function(){mask().close()};var b=function(){return function(a){var b=$.extend({},{cfw:"",color:"#2582cf"},a),c=$('<b style="color:'+b.color+'">+1</b>');b.cfw.append(c),c.animate({top:-60,opacity:0,"font-size":"40px"},500,function(){c.remove()})}}(),c=function(){return function(a){var b=$.extend({},{cfw:"",color:"#e77200"},a),c=$('<b style="color:'+b.color+'">-1</b>');b.cfw.append(c),c.animate({top:-60,opacity:0,"font-size":"40px"},500,function(){c.remove()})}}();$("div.oper .single").on("click",function(){var b=$(this);"拉票帮他"==$(this).html()?a(b,"分享链接，求助更多小伙伴助它下榜"):a(b,"分享链接，求助更多小伙伴助它下（na）榜（jiang）")}),$("div.oper").on("click",".up",function(){var a=$(this);$.post("/activity/jinpingmei/onlist.json",{companyId:$("#companyId").val(),prizeId:$("#prizeId").val()},function(c){1==c.rescode?(b({cfw:a}),setTimeout(function(){a.closest(".oper").addClass("hide").siblings(".oper").removeClass("hide"),$("div.oper .single").html("分享链接")},500)):window.location.reload()})}),$("div.oper").on("click",".down",function(){var a=$(this);$.post("/activity/jinpingmei/offlist.json",{companyId:$("#companyId").val(),prizeId:$("#prizeId").val()},function(b){1==b.rescode?(c({cfw:a}),setTimeout(function(){a.closest(".oper").addClass("hide").siblings(".oper").removeClass("hide"),$("div.oper .single").html("拉票帮他")},500)):window.location.reload()})}),$("div.more-wrap").on("click",function(){if("true"==$("div.rank-comment ul").attr("data-more")){var a=$("#lastId").val();$.ajax({url:"/activity/jinpingmei/reason.json?companyId="+$("#companyId").val()+"&prizeId="+$("#prizeId").val()+"&lastId="+a,dataType:"json",success:function(a){$("#lastId").val(a.lastId),$("div.rank-comment ul").append(a.html),a.more||$("div.more-wrap").addClass("hide")},error:function(){}})}}),window.shareCallback=function(){$("#wxMask").trigger("click")}});