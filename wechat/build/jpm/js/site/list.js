$(function(){function a(a,b,c){$("body").append('<div class="mask" id="wxMask"><div class="transmitDialog" id="transmitDialog"><p>'+b+'</p><i class="arrows"></i></div></div>');var d=$("#wxMask"),e=$("#transmitDialog");return a&&a.on("click",function(a){a.preventDefault(),d.show(),e.show()}),d.on("click",function(){d.hide(),e.hide()}),c&&c(),{open:function(a){$("#transmitDialog>p").html(a),d.show(),e.show()},close:function(){d.hide(),e.hide()}}}var b=function(){return function(a){var b=$.extend({},{cfw:"",color:"#2582cf"},a),c=$('<b style="color:'+b.color+'">+1</b>');b.cfw.append(c),c.animate({top:-50,opacity:0,"font-size":"40px",left:-10},1e3,function(){c.remove(),b.cfw.removeClass("default").addClass("past"),b.cfw.html("明天<br>再来")})}}(),c=(function(){return function(a){var b=$.extend({},{cfw:"",color:"#e77200"},a),c=$('<b style="color:'+b.color+'">-1</b>');b.cfw.append(c),c.animate({top:-50,opacity:0,"font-size":"40px"},400,function(){c.remove()})}}(),$("#curPrizeId").val());$("#companyList").on("click",".default",function(){var a=$(this).closest("dd").attr("data-company-id"),d=$(this);$.post("/activity/jinpingmei/onlist.json",{companyId:a,prizeId:c},function(a){if(1==a.rescode){var c=d.siblings("span.count");c.html(parseInt(c.html())+1),b({cfw:d})}})}),a($("#shareWx"),"立即分享，呼唤小伙伴来围观榜单");var c=$("#curPrizeId").val();$("#companyNameSuggest").autocomplete({containerClass:"autocomplete-suggestions cmp_select",serviceUrl:"/activity/jinpingmei/company.json?prizeId="+c,paramName:"q",dataType:"json",transformResult:function(a){return{suggestions:$.map(a.suggestions,function(a){var b=a.data.split("|");return{value:b[0],data:b[1],num:b[2],logo:a.logo,industry:a.industry,city:a.city}})}},onSelect:function(a){$("#encryptCompId").val(a.data),window.location.href="/activity/jinpingmei/company/"+a.data+"/?prizeId="+c}}),window.shareCallback=function(){$("#wxMask").trigger("click")}});