define("c/user_response",["c/widgets"],function(){var comment=function(e){this.elem=e.elem,this.delegate=e.delegate,this.needToInit=e.needToInit||!1,this.contentCallback=e.contentCallback||null,this.popCallback=e.popCallback||null,this.init()};comment.prototype={init:function(){var e=this;e.bindEvents();if(!this.needToInit)return this},bindEvents:function(){var e=this.delegate,t=this.contentCallback,n=this.popCallback;e.on("keyup","div.js-autotextarea",function(){var e=/<\/?[^>]*>/g,t=/[ | ]*\n/g,n=/&nbsp;/ig,r=$(this).html().replace(e,"").replace(t).replace(n," "),i=r.length-140;msg=$(this).parent().find(">p>span.cmt_w"),i<=0?msg.html('您还可以输入<strong class="ok">'+Math.abs(i)+"</strong>字"):msg.html('您已超出输入<strong class="err">'+i+"</strong>字")}).on("click","span.splaceholder",function(){var e=$(this),t=e.parent().find(">p");e.prev("div").focus(),t.is(":hidden")&&t.show(),e.addClass("myhide")}).on("click","span.pub_cmt",function(){var e=$(this),r=/<\/?[^>]*>/g,i=/<\/{1}([a-zA-Z1-6]+)>/g,s=/&nbsp;/ig,o=e.parent().parent(),u=o.find("span.splaceholder"),a=u.prev("div.js-autotextarea"),f=a.html().replace(/<\/?[^>]*>/,"\r\n").replace(i,"\r\n").replace(r,"").replace(s,""),l=$("input",e),c=e.parents("div.comments_con");if(f===""||f.length>140){a.addClass("shine").one("animationend webkitAnimationEnd",function(){$(this).removeClass("shine")});if(o.find($("span.angle_inner")).length>0){var h=$("span.angle_inner");h.addClass("angle_shine").one("animationend webkitAnimationEnd",function(){h.removeClass("angle_shine")})}return}u.data("main")=="yes"&&t&&(f=t()),$.ajax({type:"post",url:CONTEXTPATH+"/comment/publish.json",dataType:"html",data:{companyId:$("input[name=companyId]",c).val(),originId:$("input[name=originId]",c).val(),type:$("input[name=type]",c).val(),parentId:e.data("pid")||$("input[name=parentId]",c).val(),parentFloor:e.data("pnum")||$("input[name=parentFloor]",c).val(),commentContent:f},beforeSend:function(){l.prop("disabled",!0)},success:function(e){e&&$.trim(e)!==""?(l.prop("disabled",!1),$("ul",c).prepend($(e).hide().delay(200).fadeIn()),u.val("").focus(),o.hasClass("reply")&&o.hide(),o.find(">p>span.cmt_w").html('您还可以输入<strong class="ok">140</strong>字'),a.html(""),u.removeClass("myhide"),n&&n()):(l.prop("disabled",!1),$("b.red",o).show())},error:function(){l.prop("disabled",!1),$("b.red",o).show()}})}).on("click","a.add_reply",function(){var e=$(this),t=e.parent().parent().parent();reply=t.find(">div.reply"),reply.length?reply.show():t.append('<div class="reply"><div class="content_ipt js-autotextarea" aria-label="请输入评论内容" contenteditable="true" tabindex="-1"></div><span class="splaceholder">点击输入内容</span><p class="t-right clear none"><b class="red mr20 none">发布失败 : ( </b><span class="cmt_w mr20">您还可以输入<strong class="ok">140</strong>字</span><a href="javascript:;" class="cancel_reply mr20">取消</a><span class="btn_grey_b pub_cmt" data-pid="'+e.data("pid")+'" data-pnum="'+e.data("pnum")+'"><input type="button" ka="print" value="回复" ></span></p></div>')}).on("click","a.cancel_reply",function(){$(this).parent().hide().parent().hide(),$(this).parent().parent().find("span").removeClass("myhide"),$(this).parent().parent().find("div.js-autotextarea").html("")}).on("click","a.del_reply",function(){var e=$(this);$.getJSON(CONTEXTPATH+"/comment/delete.json?commentId="+e.data("pid"),function(t){t&&t.rescode==1?e.parents("li").eq(0).fadeOut(function(){}):$.maskUI.alert("删除失败！")})}).on("click","#more_cmts",function(){var e=$(this),t=e.parents("div.comments_con"),n=$("#cmtsLoading"),r=e.parent().parent();$.ajax({type:"post",url:"/comment/listmore.json",data:{type:$("input[name=type]",t).val(),originId:$("input[name=originId]",t).val(),companyId:$("input[name=companyId]",t).val(),lastId:e.data("lid")},beforeSend:function(){n.show(),r.hide()},success:function(e){e&&(n.hide(),r.after(e).remove())}})})}};var shareControler=function(){this.init()};return shareControler.prototype={init:function(){if($("#shareDialog").length)return;$("body").append('<div id="shareDialog"><div class="bdsharebuttonbox"><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_tieba" data-cmd="tieba" title="分享到百度贴吧"></a><a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_more" data-cmd="more"></a></<div><i class="s_close"></i></div></div>');var shareDialog=$("#shareDialog");window._bd_share_config={common:{bdSnsKey:{},bdMini:"2",bdMiniList:!1,bdStyle:"1",bdSize:"16",onBeforeClick:function(e,t){return{bdSnsKey:{},bdText:$("#shareTextHid").val(),bdMini:"2",bdMiniList:!1,bdPic:$("#shareImgHid").val(),bdStyle:"1",bdSize:"16"}},onAfterClick:function(){shareDialog.hide()}},share:{},image:{viewList:["qzone","tsina","tqq","renren","weixin"],viewText:"分享到：",viewSize:"16"}};with(document)(0)[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-(new Date)/36e5)];$("i.s_close",shareDialog).click(function(){shareDialog.hide()})},build:function(e){var t=$("#shareDialog");$("body").on("click",e.selectors,function(n){e.config&&e.config.call(this);var r=$(this),i=r.offset();t.css({left:i.left,top:parseInt(i.top)+parseInt(r.outerHeight())+5}).show()})}},{comment:function(e){var t=new comment(e);return t},share:function(){var e=new shareControler;return e}}}),define("comp/toggler/toggler",[],function(){return function(e){var t=$.extend({},{el:"",classname:"active",text:["收起","展开"],on:null,off:null},e);t.el.length&&t.el.on("click",function(){var e=$(this);e.hasClass(t.classname)?(e.removeClass(t.classname),t.text&&e.html(t.text[1]+"<i></i>"),t.off&&t.off.call(e)):(e.addClass(t.classname),t.text&&e.html(t.text[0]+"<i></i>"),t.on&&t.on.call(e))})}}),require.config({paths:{u:"js/utils",c:"js/site",comp:"../../components",highcharts:"http://s.kanzhun.com/js/utils/highcharts"}}),require(["c/auth_dialog","c/user_response","c/general","comp/toggler/toggler","comp/floatword/floatword"],function(e,t){$(function(){$.fn.extend({rating:function(e,t,n,r){this.each(function(i,s){var o=$(s);o.on("mouseenter","a",function(){var t=parseInt(o.find("a").index(this)+1,10),r="";o.hasClass("done")&&(r="done "),o.attr("class",r+e+t),n&&n(this)}).on("mouseleave",function(){var t=o.data("ind");o.hasClass("done")?(o.attr("class","done "+e+t),n&&n(o.find("a").eq(t-1))):(o.removeClass(function(){return $(this).attr("class",e.split(" ")[0])}),r&&r(this))}).on("click","a",function(){var e=parseInt(o.find("a").index(this)+1,10);o.addClass("done").data("ind",e),t&&t.call(this,e)})})}});var n=$("dd.spred_put_wrap");$.each(n,function(e,t){$(t).height()>32?$(t).addClass("put_away"):$(t).find("aside.spread_option").addClass("none")});var r=$("#searchForm"),i=r.find("input[name=pagenum]"),s=r.find("input[name=cityCode]"),o=r.find("input[name=jobTitle]"),u;$(".js_bt_showCgd").on("mouseenter",function(){clearTimeout(u),$(".co_grade_detail").removeClass("none")}).on("mouseleave",function(){u=setTimeout(function(){$(".co_grade_detail").addClass("none")},400)}),$("span.js_hover_gd").on("mouseenter",function(){var e=$(this);e.siblings(".grade_detail").show().end().next().addClass("fronts_a_hover")}).on("mouseleave",function(){var e=$(this);e.siblings(".grade_detail").hide().end().next().removeClass("fronts_a_hover")}),$("span.js_hover_gd").next().on("mouseenter",function(){$(this).siblings(".grade_detail").show().end().addClass("fronts_a_hover")}).on("mouseleave",function(){$(this).siblings(".grade_detail").hide().end().removeClass("fronts_a_hover")}),$(".js_textarea_enter").on("click",function(){location.href=$(this).data("url")});var a=require("comp/toggler/toggler");a({el:$("#showCoFilterJobs, #showCoFilterCities"),on:function(){this.closest("dd").addClass("show-all")},off:function(){this.closest("dd").removeClass("show-all")}}),$("#viewSearchBtn").on("click",function(e){e.preventDefault(),s.val(""),r.submit()});var f=require("comp/floatword/floatword");$("#reviewPage").upOrDown({url:CONTEXTPATH+"/review/",delegate:"a.mark",data:function(){return{reviewId:this.data("sid")}},callback:function(t){var n=this.data("mtype");if(t&&t.rescode=="1"){var r=this.find("i");this.addClass("marked"),r.html((parseInt(r.html(),10)||0)+1),this.data("mtype",null),f({cfw:this}),$.readCookie("loginPop")||(isLogged||($.maskUI.open({content:'<h3>提示</h3><div class="dialog_ac"><div>想知道你的评论内容反响如何？登录后即可收到反馈提醒！</div><p><a href="javascript:;" class="confirm_ok dialog_btn go_login">立即登录</a></p></div>'}),$("a.go_login").click(function(){e.open("#login?authcb=authCallback")})),$.writeCookie("loginPop","1"))}else this.data("mtype",n)}}),$("#officialWrap").upOrDown({url:CONTEXTPATH+"/hrreply/",delegate:"a.mark",data:function(){return{replyId:this.data("sid")}},callback:function(e){var t=this.data("mtype");if(e&&e.rescode=="1"){var n=this.find("i");this.parent().find("a").addClass("marked"),n.html((parseInt(n.html(),10)||0)+1),this.data("mtype",null),f({cfw:this})}else self.data("mtype",t)}}),$("canvas.reviewsDoughnutChart").doughnutChart({colors:["#7cb228","#ededed"],centerColor:"#ffffff",borderWidth:6}),a({el:$("#moreChartInfo"),on:function(){this.parent().siblings("p").slice(3,6).removeClass("none")},off:function(){this.parent().siblings("p").slice(3,6).addClass("none")}}),$("#reviewPage").on("mouseenter","div.js-filterblur",function(){if($(this).hasClass("noevent"))return;$(this).find("div.nologin").fadeIn(200)}).on("mouseleave","div.js-filterblur",function(){if($(this).hasClass("noevent"))return;$(this).find("div.nologin").hide()}),t.comment({delegate:$("#reviewPage"),needToInit:!0,popCallback:function(){$.readCookie("loginPop")||(isLogged||($.maskUI.open({content:'<h3>提示</h3><div class="dialog_ac"><div>想知道你的评论内容反响如何？登录后即可收到反馈提醒！</div><p><a href="javascript:;" class="confirm_ok dialog_btn go_login">立即登录</a></p></div>'}),$("a.go_login").click(function(){e.open("#login?authcb=authCallback")})),$.writeCookie("loginPop","1"))}});var l=t.share();l.build({selectors:"a.share",config:function(){$("#shareTextHid").val("有人点评了【"+$("#companyName").html()+"】，说这里“"+$(this).data("desc")+"”，快来看看吧！http://"+window.location.host+$(this).data("url")+" #看准网#@看准 ")}}),$("#nologinEmailFrm").validatorAll({elems:".v",prompt:{succ:function(e){e.siblings(".err").hide()},err:function(e,t){var n=e.siblings(".err");n.html(t||n.data("msg")).show()},normal:function(e){e.siblings(".err").hide()}},more:{email:{type:"isMail",msg:"邮箱格式不对!"}},ajaxSubmit:{elems:".v",beforeSend:function(){},dataType:"html",success:function(e){var t=$("dd.c_email_frm_wrap");t.html('<p class="send_email_succ grey_66 f_16"><i class="suc_p"></i><b>您已成功订阅公司动态信息</b></p><p class="grey_99">我们会将公司最新动态及时发送到您的邮箱，请注意查收！</p>');var n=setTimeout(function(){clearTimeout(n),t.parent().parent().slideUp(400)},2500)}}}).init().submit(function(){var e=!0,t=$.trim($("input.v_email_field").val());return $.ajax({url:"/account/checkAccountBind.json",async:!1,type:"get",data:{account:t},success:function(t){var n=$("input.v_email_field").siblings(".err");t.result?(n.html("该邮箱已被注册！请用该邮箱登录或输入其他邮箱！").show(),e=!1):(n.hide(),e=!0)}}),e}),$("#moreRating span.rating_rect").rating("rating_rect rating_r_",function(){var e=$(this),t=e.parent().find("input:hidden");e.data("rated")||e.data("rated",!0),t.val(e.index()),location.href=$("textarea.js_textarea_enter").data("url")},function(e){$(e).parent("span").next("em").html($(e).attr("title"))},function(e){$(e).next("em").html("")})})}),define("company/review",function(){});