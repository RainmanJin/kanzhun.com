define("c/user_response",["c/widgets"],function(){var comment=function(e){this.elem=e.elem,this.delegate=e.delegate,this.needToInit=e.needToInit||!1,this.contentCallback=e.contentCallback||null,this.popCallback=e.popCallback||null,this.init()};comment.prototype={init:function(){var e=this;e.bindEvents();if(!this.needToInit)return this},bindEvents:function(){var e=this.delegate,t=this.contentCallback,n=this.popCallback;e.on("keyup","div.js-autotextarea",function(){var e=/<\/?[^>]*>/g,t=/[ | ]*\n/g,n=/&nbsp;/ig,r=$(this).html().replace(e,"").replace(t).replace(n," "),i=r.length-140;msg=$(this).parent().find(">p>span.cmt_w"),i<=0?msg.html('您还可以输入<strong class="ok">'+Math.abs(i)+"</strong>字"):msg.html('您已超出输入<strong class="err">'+i+"</strong>字")}).on("click","span.splaceholder",function(){var e=$(this),t=e.parent().find(">p");e.prev("div").focus(),t.is(":hidden")&&t.show(),e.addClass("myhide")}).on("click","span.pub_cmt",function(){var e=$(this),r=/<\/?[^>]*>/g,i=/<\/{1}([a-zA-Z1-6]+)>/g,s=/&nbsp;/ig,o=e.parent().parent(),u=o.find("span.splaceholder"),a=u.prev("div.js-autotextarea"),f=a.html().replace(/<\/?[^>]*>/,"\r\n").replace(i,"\r\n").replace(r,"").replace(s,""),l=$("input",e),c=e.parents("div.comments_con");if(f===""||f.length>140){a.addClass("shine").one("animationend webkitAnimationEnd",function(){$(this).removeClass("shine")});if(o.find($("span.angle_inner")).length>0){var h=$("span.angle_inner");h.addClass("angle_shine").one("animationend webkitAnimationEnd",function(){h.removeClass("angle_shine")})}return}u.data("main")=="yes"&&t&&(f=t()),$.ajax({type:"post",url:CONTEXTPATH+"/comment/publish.json",dataType:"html",data:{companyId:$("input[name=companyId]",c).val(),originId:$("input[name=originId]",c).val(),type:$("input[name=type]",c).val(),parentId:e.data("pid")||$("input[name=parentId]",c).val(),parentFloor:e.data("pnum")||$("input[name=parentFloor]",c).val(),commentContent:f},beforeSend:function(){l.prop("disabled",!0)},success:function(e){e&&$.trim(e)!==""?(l.prop("disabled",!1),$("ul",c).prepend($(e).hide().delay(200).fadeIn()),u.val("").focus(),o.hasClass("reply")&&o.hide(),o.find(">p>span.cmt_w").html('您还可以输入<strong class="ok">140</strong>字'),a.html(""),u.removeClass("myhide"),n&&n()):(l.prop("disabled",!1),$("b.red",o).show())},error:function(){l.prop("disabled",!1),$("b.red",o).show()}})}).on("click","a.add_reply",function(){var e=$(this),t=e.parent().parent().parent();reply=t.find(">div.reply"),reply.length?reply.show():t.append('<div class="reply"><div class="content_ipt js-autotextarea" aria-label="请输入评论内容" contenteditable="true" tabindex="-1"></div><span class="splaceholder">点击输入内容</span><p class="t-right clear none"><b class="red mr20 none">发布失败 : ( </b><span class="cmt_w mr20">您还可以输入<strong class="ok">140</strong>字</span><a href="javascript:;" class="cancel_reply mr20">取消</a><span class="btn_grey_b pub_cmt" data-pid="'+e.data("pid")+'" data-pnum="'+e.data("pnum")+'"><input type="button" ka="print" value="回复" ></span></p></div>')}).on("click","a.cancel_reply",function(){$(this).parent().hide().parent().hide(),$(this).parent().parent().find("span").removeClass("myhide"),$(this).parent().parent().find("div.js-autotextarea").html("")}).on("click","a.del_reply",function(){var e=$(this);$.getJSON(CONTEXTPATH+"/comment/delete.json?commentId="+e.data("pid"),function(t){t&&t.rescode==1?e.parents("li").eq(0).fadeOut(function(){}):$.maskUI.alert("删除失败！")})}).on("click","#more_cmts",function(){var e=$(this),t=e.parents("div.comments_con"),n=$("#cmtsLoading"),r=e.parent().parent();$.ajax({type:"post",url:"/comment/listmore.json",data:{type:$("input[name=type]",t).val(),originId:$("input[name=originId]",t).val(),companyId:$("input[name=companyId]",t).val(),lastId:e.data("lid")},beforeSend:function(){n.show(),r.hide()},success:function(e){e&&(n.hide(),r.after(e).remove())}})})}};var shareControler=function(){this.init()};return shareControler.prototype={init:function(){if($("#shareDialog").length)return;$("body").append('<div id="shareDialog"><div class="bdsharebuttonbox"><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_tieba" data-cmd="tieba" title="分享到百度贴吧"></a><a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_more" data-cmd="more"></a></<div><i class="s_close"></i></div></div>');var shareDialog=$("#shareDialog");window._bd_share_config={common:{bdSnsKey:{},bdMini:"2",bdMiniList:!1,bdStyle:"1",bdSize:"16",onBeforeClick:function(e,t){return{bdSnsKey:{},bdText:$("#shareTextHid").val(),bdMini:"2",bdMiniList:!1,bdPic:$("#shareImgHid").val(),bdStyle:"1",bdSize:"16"}},onAfterClick:function(){shareDialog.hide()}},share:{},image:{viewList:["qzone","tsina","tqq","renren","weixin"],viewText:"分享到：",viewSize:"16"}};with(document)(0)[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-(new Date)/36e5)];$("i.s_close",shareDialog).click(function(){shareDialog.hide()})},build:function(e){var t=$("#shareDialog");$("body").on("click",e.selectors,function(n){e.config&&e.config.call(this);var r=$(this),i=r.offset();t.css({left:i.left,top:parseInt(i.top)+parseInt(r.outerHeight())+5}).show()})}},{comment:function(e){var t=new comment(e);return t},share:function(){var e=new shareControler;return e}}}),define("c/mini_search",["c/widgets"],function(){$(function(){var e=$("#MSSFloor"),t=$("#MSSFloorFixed"),n=$("#MSSQType"),r={serviceUrl:CONTEXTPATH+"/autocomplete/searchkey.json",paramName:"query",width:463,params:function(e){return{query:e,type:n.val()}},dataType:"json",transformResult:function(e){return{suggestions:$.map(e.suggestions,function(e){return{value:e.value,type:e.type}})}},customHTML:function(e,t,n,r){var i=[],s=[],o=[],u;$.each(e||[],function(e,i){e===0&&(u=i.type),i.type=="1"?s.push('<div class="'+t+'" data-index="'+e+'">'+n(i,r)+"</div>"):o.push('<div class="'+t+'" data-index="'+e+'">'+n(i,r)+"</div>")});if(o.length){var a=u==0?"unshift":"push";a=="unshift"?(i[a]("<dt>职位</dt><dd>"+o.join("")+"</dd>"),s.length&&i.push('<dt class="bd">公司</dt><dd class="bd">'+s.join("")+"</dd>")):(i[a]('<dt class="bd">职位</dt><dd class="bd">'+o.join("")+"</dd>"),s.length&&i.unshift("<dt>公司</dt><dd>"+s.join("")+"</dd>"))}else if(s.length)return i=[],i.push(s.join("")),i.join("");return i.length===0?"":"<dl>"+i.join("")+"</dl>"},onSelect:function(e){var t=$(this).closest("form");$("input[name=stype]",t).val(e.type),t.submit()}};e.placeholderS(),t.placeholderS(),e.autocomplete(r),t.autocomplete($.extend({},r,{appendTo:t.parent(),width:462}));var i=$("#topSearchFixed");if(i.length)var s=setTimeout(function(){var e=$("#topSearchOriginal").offset().top+300;$(window).on("scroll",function(){var t=$(document).scrollTop();t>e?i.fadeIn():i.fadeOut()})},200);$("input").placeholderFocus()})}),define("comp/fav/js/collection",["c/auth_dialog"],function(e){return function(t){t.elem.on("click",function(t){if(!e.isLogged()){e.open("#login");return}var n=$(this),r=n.data("j");r&&$.getJSON(CONTEXTPATH+"/job/adduserjc.json?jobId="+r,function(t){t=t||{},t.rescode==1011?e.open("#login"):t.rescode==1&&(n.attr("class","hadcollection").data("j",null).prop("disabled",!0),n.html('<i class="hadcollection"></i>已收藏'))})})}}),require.config({paths:{u:"js/utils",c:"js/site",comp:"../../components",highcharts:"http://s.kanzhun.com/js/utils/highcharts",v2:"v2/js"}}),require(["c/auth_dialog","c/user_response","c/mini_search","comp/fav/js/collection"],function(e,t){$(function(){function f(e,t){var n=WebUploader.create({auto:!0,swf:"/images/Uploader.swf",server:"/resume/upload.json",pick:{id:e,label:t},fileSingleSizeLimit:2097152,accept:{title:"Applications",extensions:"doc,docx,pdf",mimeTypes:"application/msword,application/pdf"}});n.on("error",function(e){e=="F_EXCEED_SIZE"&&alert("上传简历不能超过2M!")}),n.on("uploadSuccess",function(e,t){t.rescode==1?($("#license").val(t.docData),$("#fileName").val(t.docName),i&&($("#uploaders").addClass("none"),$("#uploader").removeClass("none"),f("#picker","重新上传"),$("#rDeliverResume").trigger("click").attr("checked",!0))):alert(t.resmsg)})}$("#deliverResumePop").attr("data-show")&&$.maskUI.open({elem:$("#deliverResumePop")}),$.maskUI.open({elem:$("#automaticalDialog"),destroy:!0});var n=require("comp/fav/js/collection");n({elem:$("#jdFavorite")});var r=t.share();r.build({selectors:"a.share",config:function(){$("#shareTextHid").val($(this).data("desc")+"，快来看看吧！http://"+window.location.host+$(this).data("url")+" #看准网#@看准 ")}}),$("dl.co-alias-tabs").tabs({tabSelector:"dt>span",tabPanel:"dd"});var i=!0,s=$("#deliverResumePop"),o=$("#deliverResumeTop, #deliverResumeBot");if(o.length===2){var u=$("div.jd-tt"),a=u.offset().top+200;$(window).on("mousewheel DOMMouseScroll",function(e){var t=0,n=e.originalEvent,r=$(document).scrollTop();n.wheelDelta?t=n.wheelDelta/120:n.detail&&(t=-n.detail/3),r>a?t>0?u.addClass("jd-tt-fixed"):u.removeClass("jd-tt-fixed"):u.removeClass("jd-tt-fixed")})}o.on("click",function(){if($(this).hasClass("had_deliver"))return!1;$.maskUI.open({elem:s});var e=$("div.deliver_resume_option").data("boxtype");e=="uploader"?(f("#pickers","上传简历"),i=!0):(f("#picker","重新上传"),i=!1)}),$("input.radio_ipt").click(function(){$("input.radio_ipt").parent().find("input").removeClass("v"),$(this).parent().find("input").addClass("v"),$("p.hide_err").hide()}),window.finishDeliver=function(){$("#authFrame").remove(),$("#deliverFrm").trigger("submit")};var l=function(e,t){$.maskUI.open({content:'<div class="success_con deliver_resume_way"><h3 class="mb15">还差一步就能成功申请职位</h3><p class="grey_99">请验证邮箱，以便企业人事部联系您。</p><p class="mb20"><strong>'+e.email+"</strong></p>"+'<p><input type="button"  value="验证邮箱" class="deliver_btn" id="verifyDeliverRequest"></p>'+'<p class="t-center f_12 pt10"><a href="javascript:;" class="maskui_close">我不申请了</a></p></div>',destroy:!1,id:"deliverEmailDialog"}),$("#verifyDeliverRequest").on("click",function(){var t=$(this);setTimeout(function(){e.loginEmail&&window.open(e.loginEmail)},100),t.prop("disabled",!0),$.ajax({type:"post",url:"/resume/verifydeliver.json",data:e,beforeSend:function(){t.val("正在发送验证...")},success:function(e){t.prop("disabled",!1).val("验证邮箱"),e.rescode=="1"?($.maskUI.open({content:'<div class="success_con deliver_resume_way"><h3 class="mb15">邮箱是否验证成功？</h3><p class="clearfix mb20"><a href="javascript:;" class="green-btn fleft" id="deliverSuccess">是</a><a href="javascript:;" class="btn_grey_l cancel-bind" id="deliverFailure">否</a></p><p class="f_12 grey_99">稍等几分钟，若没有收到验证邮件，怎么办？ <br/>1、<a href="javascript:;" id="deliverAgain">重新发送验证邮件</a>；<br/>2、看看是否在邮箱的垃圾邮件、广告邮件目录里</p></div>'}),$("#deliverSuccess").on("click",function(){window.location.reload()}),$("#deliverFailure").on("click",function(){$.maskUI.open({elem:"deliverEmailDialog"})}),$("#deliverAgain").on("click",function(){$("#verifyDeliverRequest").trigger("click")})):alert(e.resmsg||"服务器异常！")},error:function(){alert("服务器异常！"),t.prop("disabled",!1).val("验证邮箱")}})}),t&&$("#verifyDeliverRequest").trigger("click")},c=$("input[name=accountCheck]"),h=isLogged&&$("input[name=email]").data("unbound");$("#deliverFrm").validatorAll({elems:"input.v",prompt:{succ:function(e,t){$(">p.err",e.parent().addClass("focus")).hide()},err:function(e,t,n){var r=$(">p.err",e.parent().removeClass("focus").addClass("error"));r.html(t||r.data("msg")).show()},normal:function(e,t){$(">p.err",e.parent().removeClass("focus err")).hide()}},more:{email:{type:"isMail",msg:"邮箱格式不对！",fn:function(e,t,n){if(!h)return!0;var r=$(this),i=this.value;return c.val()==i?(t.err(r,"此邮箱已被注册！"),!1):($.getJSON(CONTEXTPATH+"/account/checkAccountBind.json?account="+encodeURIComponent(i),function(e){e=e||{},e.rescode==1?e.result?(t.err(r,"此邮箱已被注册！"),c.val(i)):(t.succ(r),c.val("")):(t.err(r,e.resmsg||"服务器异常！"),c.val(""))}),!0)}}},ajaxSubmit:{elems:".v",dataType:"json",beforeSend:function(){},success:function(t){if(t.rescode!="1"||!t.resumeData)return alert(t.resmsg),!1;switch(t.resumeData.type){case"verifyEmail":l(t.resumeData);break;case"emailLogin":e.open("?authcb=finishDeliver&third=no&loginAccount="+encodeURIComponent(t.resumeData.email)+"#login");break;case"bindEmail":$.maskUI.open({content:'<h3 class="mb15"><i class="suc_p"></i>成功申请职位！</h3><form action="/account/bindEmail.json" method="post" id="setNewPwdForm"><p>请绑定并验证邮箱，以便企业人事部联系您。</p><p class="prompt mt10 mb15 success">邮箱地址：'+t.resumeData.email+"</p>"+'<input type="hidden" name="jobId" value="'+t.resumeData.jobId+'">'+'<input id="account" name="account" type="hidden" value="'+t.resumeData.email+'">'+'<input id="token" name="token" type="hidden" value="ZjfNok87biFN1ivQ6iDniwi6kw8Vs8IM">'+'<div class="mb10"><input type="password" name="password" placeholder="新的密码" class="ifd mb10">'+'<p class="red mb20 none" data-msg="请输入新的密码！"></p></div><div class="mb10">'+'<input type="password" name="repassword" placeholder="确认密码" class="ifd mb10">'+'<p class="red mb20 none" data-msg="请输入确认密码！"></p></div><div>'+'<input type="submit" value="确定" class="btn_grey_s mr10"></div></form>',onOpen:function(){this.find("a.dialog_close").remove()}}),$("#setNewPwdForm").validatorAll({elems:"input:password",prompt:{succ:function(e){$("p",e.parent()).html("").hide()},err:function(e,t){var n=$("p",e.parent());n.html(t||n.data("msg")).show()},normal:function(e){$("p",e.parent()).html("").hide()}},more:{password:{type:/^(?![^a-zA-Z]+$)(?!\D+$).{6,14}$/,msg:"请输入6-14位密码，必须包含数字和字母！",fn:function(e,t){var n=e.form.find("input[name=repassword]"),r=$.trim(n.val());return r!==""&&this.value!=r?(t.err($(this),"两次输入的密码不一致！"),t.normal(n),!1):(t.succ($(this)),r!==""&&t.succ(n),!0)}},repassword:{type:/^(?![^a-zA-Z]+$)(?!\D+$).{6,14}$/,msg:"请输入6-14位密码，必须包含数字和字母！",fn:function(e,t){var n=e.form.find("input[name=password]"),r=$.trim(n.val());return r!==""&&this.value!=r?(t.err($(this),"两次输入的密码不一致！"),t.normal(n),!1):(t.succ($(this)),r!==""&&t.succ(n),!0)}}},ajaxSubmit:{elems:"input:password, input:hidden",success:function(e){e&&e.rescode==1?(e.loginEmail&&window.open(e.loginEmail),l(t.resumeData,!0)):alert(e.resmsg||"提交失败！")}}}).init().submit();break;case"bindedEmail":$.maskUI.open({content:'<div class="deliver_resume_way"><h3 class="deliver_suc"><i class="suc_p"></i>成功申请职位！</h3><p class="grey_66 mt20">用人单位将通过以下邮箱和您联系</p><p class="mb20"><strong>'+t.resumeData.email+'</strong></p><p><a href="/jobl/p/?q='+encodeURIComponent($("input[name=jobName]").val())+'" class="deliver_btn">哪些公司正在招聘相同岗位？</a></p></div>',onClose:function(){window.location.reload()},onOpen:function(){this.find("a.dialog_close").remove()}}),o.removeClass("btn_o_l").addClass("had_deliver").html("已投递"),$("input.parameters").val("null")}}}}).init().submit(function(){return h&&c.val()!==""?!1:!0})})}),define("job/job-detail",function(){});