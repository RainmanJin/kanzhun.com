define("comp/auth/auth",["c/widgets","u/validator"],function(){$(function(){var e=self!==top,t="placeholder"in document.createElement("input"),n=function(e,t){var n=(new RegExp("[\\?&]"+e+"=([^&#]*)")).exec(t);return n?n[1]||null:null};if(e){var r=$("#loginDialog"),i=$("#registerDialog"),s,o,u,a=function(e){var a=e||window.location.hash;return u=u||n("authcb",a),t||$("body>span.onholder").remove(),a.indexOf("#login")===0?(i.hide(),r.css("display","inline-block"),s=n("lcb",a)||u,setTimeout(function(){$("input:text, input:password",r).placeholder()},200),!0):a.indexOf("#register")===0?(r.hide(),i.css("display","inline-block"),o=n("rcb",a)||u,setTimeout(function(){$("input:text, input:password",i).placeholder()},200),!0):!1};if(!a())return;$("a.dialog_close").on("click",function(t){t.preventDefault();if(e){var n=self.frameElement;n.parentNode.removeChild(n)}}),$("a.jump").on("click",function(e){e.preventDefault(),a($(this).attr("href"))})}else $("input:text, input:password").placeholder();window.changeAuthCode=function(e){e&&($("input[name=captcha]").val(""),e.setAttribute("src",e.getAttribute("src").split("&t=")[0]+"&t="+(new Date).getTime()))},$("#loginForm").validatorAll({elems:"input:text, input:password",prompt:{succ:function(e,t){var n=e.parent();$("p.err",n).hide(),n.removeClass("error focus")},err:function(e,t,n){$("#loginForm p.err").hide();var r=e.parent(),i=$("p.err",r);i.html("<i></i>"+(t||i.data("msg"))).show(),r.removeClass("focus").addClass("error")},normal:function(e,t){var n=e.parent();$("p.err",e.parent()).hide(),n.removeClass("error").addClass("focus")}},focusMore:function(e){return $(this).parent().removeClass("error").addClass("focus"),!0},more:{account:function(e,t,n){return $("li.code","#loginForm").length===0&&$.getJSON(CONTEXTPATH+"/login/needcaptcha.json?account="+encodeURIComponent(this.value),function(t){if(t&&t.rescode==1){var n=t.randomKey;$("#loginField").append('<li class="code"><img src="/captcha?randomKey='+n+'" onclick="changeAuthCode(this);" title="看不清？点击换一张" />'+'<div><input type="text" name="captcha" placeholder="输入验证码" maxlength="4" class="ifd" />'+'<input type="hidden" name="randomKey" value="'+n+'"/><p class="err" data-msg="请输入验证码！"></p></div></li>'),e.init($("input[name=captcha]"),e.form)}}),!0}},ajaxSubmit:{elems:"input",success:function(t,n){t=t||{};if(t.rescode==1)if(e){var r=self.parent[s];if(r){r(t);return}self.parent.location.reload()}else window.location.href=$("input[name=redirect]").val()||window.location.host+"/";else t.rescode==-1?($.each(t.errorMessageList||[],function(e,t){n.form.find("input[name="+t.fieldName+"]").parent().removeClass("focus").addClass("error").find("p.err").html("<i></i>"+t.resmsg).show()}),changeAuthCode($("#loginForm .code img")[0])):($("#loginForm p.sys_err span").html(t.resmsg||"服务器异常！").removeClass().addClass("shake animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass()}),changeAuthCode($("#loginForm .code img")[0]))}}}).init().submit();var f=$("input[name=accountCheck]");$("#registerForm").validatorAll({elems:"input",prompt:{succ:function(e,t){var n=e.parent();$("p.err",n).hide(),n.removeClass("error focus")},err:function(e,t,n){$("#loginForm p.err").hide();var r=e.parent(),i=$("p.err",r);i.html("<i></i>"+(t||i.data("msg"))).show(),r.removeClass("focus").addClass("error")},normal:function(e,t){var n=e.parent();$("p.err",e.parent()).hide(),n.removeClass("error").addClass("focus")}},focusMore:function(e){return $(this).parent().removeClass("error").addClass("focus"),!0},more:{account:{type:"isMail",msg:"邮箱格式不正确！",fn:function(e,t,n){var r=$(this),i=this.value;return f.val()==i?(t.err(r,"此邮箱已被注册！"),!1):($.getJSON(CONTEXTPATH+"/account/checkAccountBind.json?account="+encodeURIComponent(i),function(e){e=e||{},e.rescode==1?e.result?(t.err(r,"此邮箱已被注册！"),f.val(i)):(t.succ(r),f.val("")):(t.err(r,e.resmsg||"服务器异常！"),f.val(""))}),!0)}},password:{type:/^(?![^a-zA-Z]+$)(?!\D+$).{6,14}$/,msg:"密码格式不正确！",fn:function(e,t){var n=e.form.find("input[name=confirmPassword]"),r=$.trim(n.val());return r!==""&&this.value!=r?(t.err($(this),"两次密码不一致！"),t.normal(n),!1):(t.succ($(this)),r!==""&&t.succ(n),!0)}},confirmPassword:{type:/^(?![^a-zA-Z]+$)(?!\D+$).{6,14}$/,msg:"密码格式不正确！",fn:function(e,t){var n=e.form.find("input[name=password]"),r=$.trim(n.val());return r!==""&&this.value!=r?(t.err($(this),"两次密码不一致！"),t.normal(n),!1):(t.succ($(this)),r!==""&&t.succ(n),!0)}}},ajaxSubmit:{elems:"input:text, input:password, input:hidden",success:function(t,n){t=t||{};if(t.rescode==1)if(e){var r=self.parent[o];if(r){r(t);return}self.parent.location.reload()}else window.location.href="http://"+window.location.host+"/";else t.rescode==-1?($.each(t.errorMessageList||[],function(e,t){n.form.find("input[name="+t.fieldName+"]").parent().removeClass("focus").addClass("error").find("p.err").html("<i></i>"+t.resmsg).show()}),changeAuthCode($("#registerForm .code img")[0])):($("#registerForm p.sys_err span").html(t.resmsg||"服务器异常！").removeClass().addClass("shake animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass()}),changeAuthCode($("#registerForm .code img")[0]))}}}).init().submit(function(){return f.val()!==""?!1:!0}),$("#autoLogin").on("click",function(){$(this).is(":checked")?this.value="1":this.value=""}),window.thirdpartyCallback=function(t){if(e){var n=self.parent[s];if(n){n(t);return}self.parent.location.reload()}},$("#thirdpartyLogin").on("click","a",function(){window.open($(this).data("original")+"?type=1","tdpp","width=600,height=400,left=300,top=200")})})}),require.config({paths:{u:"js/utils",c:"js/site",comp:"../../components",highcharts:"http://s.kanzhun.com/js/utils/highcharts",v2:"v2/js"}}),require(["c/auth_dialog","comp/auth/auth"],function(e){$(function(){var e=$("div.ugc-suc-redirect button"),t=5;e.length&&setInterval(function(){t==1?window.location.href=e.val():(t--,e.html(t))},1e3);var n=$("#loginDiv"),r=$("#regDiv");n.on("click",".jump",function(e){e.preventDefault(),n.addClass("none"),r.removeClass("none")}),r.on("click",".jump",function(e){e.preventDefault(),r.addClass("none"),n.removeClass("none")})})}),define("ugc/main-complete",function(){});